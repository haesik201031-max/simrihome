<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>AUDIT-K (음주)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
  h1{font-size:28px;margin:8px 0 16px}
  .muted{color:#667085}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:block;margin:6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .opts input[type="radio"]{accent-color:#1668e3;transform:scale(1.1)}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer;margin-top:10px}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px;font-size:16px}
  .counsel-btn{display:none;text-align:center;margin-top:20px}
  .counsel-btn button{background:#e53935;color:#fff;font-size:18px;font-weight:700;border:0;border-radius:12px;padding:16px 28px;cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">마음건강 자가검진</div>
    <a class="home" href="index.html">← 메인으로</a>
  </div>

  <h1>AUDIT-K (음주)</h1>
  <p class="muted">최근 1년 동안의 음주 습관을 바탕으로 선택하세요.</p>

  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">결과 확인</button>
    <div id="out" class="result" style="display:none"></div>
  </div>

  <div class="counsel-btn" id="counselDiv">
    <button type="button" onclick="window.location.href='counsel.html'">상담 신청하기</button>
  </div>
</div>

<script>
// PSS와 동일한 동적 생성 방식(0-based name: q0~q9)
const questions = [
  {
    text: "1. 얼마나 자주 술을 마십니까?",
    opts: [
      {label:"전혀 안 마심", value:0},
      {label:"한 달에 한 번 미만", value:1},
      {label:"한 달에 2~4번", value:2},
      {label:"주 2~3번", value:3},
      {label:"주 4번 이상", value:4},
    ]
  },
  {
    text: "2. 술을 마시는 날, 보통 얼마나 마십니까? (잔 기준)",
    opts: [
      {label:"1~2잔", value:0},
      {label:"3~4잔", value:1},
      {label:"5~6잔", value:2},
      {label:"7~9잔", value:3},
      {label:"10잔 이상", value:4},
    ]
  },
  {
    text: "3. 한 번에 소주 1병(맥주 4캔) 이상 마시는 경우는 얼마나 자주 있습니까?",
    opts: [
      {label:"전혀 없음", value:0},
      {label:"한 달에 1회 미만", value:1},
      {label:"한 달에 1회 이상", value:2},
      {label:"주 1회 이상", value:3},
      {label:"거의 매일", value:4},
    ]
  },
  {
    text: "4. 지난 1년 동안, 술 때문에 일상에 지장이 있었습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"한 달에 1회 미만", value:1},
      {label:"한 달에 1회 이상", value:2},
      {label:"주 1회 이상", value:3},
      {label:"거의 매일", value:4},
    ]
  },
  {
    text: "5. 지난 1년 동안, 음주 후 후회하거나 죄책감을 느낀 적이 있습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"한 달에 1회 미만", value:1},
      {label:"한 달에 1회 이상", value:2},
      {label:"주 1회 이상", value:3},
      {label:"거의 매일", value:4},
    ]
  },
  {
    text: "6. 음주 후 기억이 끊긴 적이 있습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"한 달에 1회 미만", value:1},
      {label:"한 달에 1회 이상", value:2},
      {label:"주 1회 이상", value:3},
      {label:"거의 매일", value:4},
    ]
  },
  {
    text: "7. 술로 인해 다치거나 사고를 당한 적이 있습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"있음", value:2},
      {label:"최근 1년 내 반복됨", value:4},
    ]
  },
  {
    text: "8. 가족이나 친구가 당신의 음주를 걱정하거나 권고한 적이 있습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"있음", value:2},
      {label:"최근 1년 내 반복됨", value:4},
    ]
  },
  {
    text: "9. 아침에 해장술을 마셔본 적이 있습니까?",
    opts: [
      {label:"없음", value:0},
      {label:"드물게", value:1},
      {label:"가끔", value:2},
      {label:"자주", value:3},
      {label:"거의 매일", value:4},
    ]
  },
  {
    text: "10. 음주를 줄이거나 끊어야겠다고 생각한 적이 있습니까?",
    opts: [
      {label:"전혀 없음", value:0},
      {label:"있음", value:2},
      {label:"최근 1년 내 반복됨", value:4},
    ]
  },
];

const labelsToHTML = (name, opts) =>
  opts.map((o,idx)=>(
    `<label><input type="radio" name="${name}" value="${o.value}" required/> ${o.label}</label>`
  )).join('');

const form = document.getElementById('form');
questions.forEach((q,i)=>{
  const box = document.createElement('div'); box.className='card';
  box.innerHTML = `
    <div class="q">${q.text}</div>
    <div class="opts">
      ${labelsToHTML(`q${i}`, q.opts)}
    </div>`;
  form.append(box);
});

function score(){
  let sum=0, count=0;
  for(let i=0;i<questions.length;i++){
    const sel = form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return null;
    sum += Number(sel.value);
    count++;
  }
  if(count!==questions.length) return null;
  return sum; // 0~40
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc = score();
  const out = document.getElementById('out');
  if(sc===null){ alert('모든 문항을 선택해 주세요.'); return; }

  let level='', guide='';
  if(sc < 8){
    level='정상';
    guide='음주 습관이 비교적 건강하며 위험 요인은 낮습니다.';
  }else if(sc < 16){
    level='위험 음주';
    guide='음주 습관이 건강에 영향을 줄 가능성이 있으며, 절주 노력과 자기 점검이 필요합니다. → 상담 선택 권장';
  }else{
    level='알코올 의존 가능성';
    guide='알코올 사용 문제가 뚜렷해 일상·신체·정신건강에 심각한 영향을 줄 수 있습니다. → 상담 필수 요망';
  }

  out.style.display='block';
  out.innerHTML = `<b>총점: ${sc}점</b><br/><b>구분: ${level}</b><br/><span class="muted">${guide}</span>`;
  document.getElementById('counselDiv').style.display='block';
});
</script>
</body>
</html>
