<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>IES-R (사건 충격 척도)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  h1{font-size:28px;margin:8px 0 16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:inline-flex;align-items:center;gap:8px;margin:6px 10px 6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer;margin-top:10px}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px;font-size:16px}
  .muted{color:#667085}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
  .counsel-btn{display:none;text-align:center;margin-top:20px}
  .counsel-btn button{background:#e53935;color:#fff;font-size:18px;font-weight:700;border:0;border-radius:12px;padding:16px 28px;cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">마음건강 자가검진</div>
    <a class="home" href="index.html">← 메인으로</a>
  </div>
  <h1>IES-R (사건 충격 척도)</h1>
  <p class="muted">최근 한 달 동안 특정 사건과 관련해 경험한 정도를 선택하세요.</p>

  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">결과 확인</button>
    <div id="out" class="result" style="display:none"></div>
  </div>

  <div class="counsel-btn" id="counselDiv">
    <button onclick="window.location.href='counsel.html'" type="button">상담 신청하기</button>
  </div>
</div>

<script>
// IES-R 문항 (22개)
const q = [
  "사건에 대한 생각이나 영상이 원치 않아도 떠올랐다.",
  "사건을 떠올리게 하는 것들을 피하려고 했다.",
  "사건에 대한 꿈을 자주 꾸었다.",
  "사건과 관련된 일을 떠올리는 것이 힘들었다.",
  "사건이 다시 일어나는 것처럼 느꼈다.",
  "사건에 대해 이야기하거나 생각하는 것을 피했다.",
  "사건과 관련된 활동이나 상황을 피했다.",
  "사건 이후로 경계심이 높아졌다.",
  "사건에 대해 생각하지 않으려 애썼다.",
  "사건을 떠올리면 심장이 두근거리거나 신체 반응이 나타났다.",
  "사건이 일어나기 전의 생활을 떠올리기 힘들었다.",
  "사건 이후로 사람들과 가까워지기 어렵게 느꼈다.",
  "사건 이후로 미래가 단절된 것처럼 느껴졌다.",
  "사건에 대해 떠올리면 화가 나거나 불안했다.",
  "사건 이후로 쉽게 놀라거나 화들짝 놀랐다.",
  "사건을 떠올리면 집중하기가 어려웠다.",
  "사건 이후로 수면이 방해되거나 악몽을 꿨다.",
  "사건에 대한 기억이 부분적으로 떠오르지 않았다.",
  "사건 이후로 기분이 가라앉거나 우울했다.",
  "사건을 생각하지 않으려고 다른 일에 몰두했다.",
  "사건에 대한 감정이 둔화되었다.",
  "사건 이후로 긴장 상태가 오래 지속되었다."
];

const labels = ["전혀 없음 (0)", "조금 (1)", "보통 (2)", "많이 (3)", "매우 심함 (4)"];

const form = document.getElementById('form');
q.forEach((t,i)=>{
  const box=document.createElement('div'); box.className='card';
  box.innerHTML=`
    <div class="q">${i+1}. ${t}</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label><input type="radio" name="q${i}" value="${idx}" required/> ${lb}</label>
      `).join('')}
    </div>`;
  form.append(box);
});

// 점수 계산
function score(){
  let s=0,c=0;
  q.forEach((_,i)=>{
    const sel=form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return; s+=Number(sel.value); c++;
  });
  if(c!==q.length) return null;
  return s; // 0~88
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc=score();
  const out=document.getElementById('out');
  if(sc===null){ alert("모든 문항을 선택해 주세요."); return; }

  let guide="";
  if(sc<=24){
    guide="정상 범위: 외상 사건이 큰 영향을 미치지 않고 있습니다.<br>일상 유지가 가능하나, 자기 관리와 예방이 필요합니다.";
  } else if(sc<=39){
    guide="주의 수준: 외상 사건으로 인한 정서적 어려움이 나타나고 있습니다.<br>상담을 통한 감정 조절 훈련이 권장됩니다.";
  } else {
    guide="높은 위험: PTSD(외상 후 스트레스 장애) 가능성이 높습니다.<br>즉각적인 전문 상담과 치료개입이 필요합니다.";
  }

  out.style.display='block';
  out.innerHTML=`<b>총점: ${sc}점 (0~88)</b><br/><span>${guide}</span>`;
  document.getElementById('counselDiv').style.display='block';
  document.getElementById('counselDiv').scrollIntoView({behavior:"smooth"});
});
</script>
</body>
</html>
