<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>IES-R (사건 충격 척도)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  h1{font-size:28px;margin:8px 0 16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:inline-flex;align-items:center;gap:8px;margin:6px 10px 6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px;font-size:16px}
  .muted{color:#667085}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
  .counsel-btn{display:none;text-align:center;margin-top:20px}
  .counsel-btn button{background:#e53935;color:#fff;font-size:18px;font-weight:700;border:0;border-radius:12px;padding:16px 28px;cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">마음건강 자가검진</div>
    <a class="home" href="index.html">← 메인으로</a>
  </div>
  <h1>IES-R (사건 충격 척도)</h1>
  <p class="muted">해당 사건과 관련하여 지난 1주 동안의 경험을 선택하세요.</p>

  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">결과 확인</button>
    <div id="out" class="result" style="display:none"></div>
  </div>

  <div class="counsel-btn" id="counselDiv">
    <button onclick="window.location.href='counsel.html'" type="button">상담 신청하기</button>
  </div>
</div>

<script>
const labels = ["전혀 없다","약간 있다","상당히 있다","많이 있다","극심하게 있다"];
const qs = [
  "그 사건을 떠올리게 하는 것이 당시 감정을 다시 불러일으켰다",
  "수면을 지속하는 데 어려움이 있었다",
  "다른 일들로 인해 그 사건을 생각하게 된다",
  "그 사건 이후 예민하고 화가 났다",
  "그 사건을 생각/떠올릴 때 혼란스러워 회피하려 했다",
  "생각하지 않으려 해도 그 사건이 떠올랐다",
  "그 사건이 일어나지 않았거나 현실이 아닌 것처럼 느꼈다",
  "그 사건을 상기시키는 것들을 멀리했다",
  "그 사건의 장면이 마음속에 갑자기 떠올랐다",
  "신경이 예민해지고 쉽게 놀랐다",
  "그 사건에 대해 생각하지 않으려 노력했다",
  "그 사건에 많은 감정을 느끼지만 신경 쓰고 싶지 않았다",
  "그 사건에 대한 감정이 무감각했다",
  "마치 사건 당시로 돌아간 것처럼 느끼거나 행동했다",
  "잠들기가 어려웠다",
  "그 사건에 대한 강한 감정이 밀려왔다",
  "그 사건을 기억에서 지우려고 노력했다",
  "집중하는 데 어려움이 있었다",
  "사건을 떠올리게 하는 것에 신체 반응(식은땀, 호흡곤란 등)이 있었다",
  "그 사건에 관한 꿈을 꾸었다",
  "주위를 경계하고 감시하고 있다고 느꼈다",
  "그 사건에 대해 이야기하지 않으려 했다"
];

const form = document.getElementById('form');
qs.forEach((t,i)=>{
  const box = document.createElement('div'); box.className='card';
  box.innerHTML = `
    <div class="q">${i+1}. ${t}</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label><input type="radio" name="q${i}" value="${idx}" required/> ${lb}</label>
      `).join('')}
    </div>`;
  form.append(box);
});

function score(){
  let s=0,c=0;
  qs.forEach((_,i)=>{
    const sel = form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return; s+=Number(sel.value); c++;
  });
  if(c!==qs.length) return null;
  return s; // 0~88
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc = score();
  const out = document.getElementById('out');
  const counsel = document.getElementById('counselDiv');
  if(sc===null){ alert('모든 문항을 선택해 주세요.'); return; }

  let level="", guide="";
  if(sc<=24){ level="정상 범위"; guide="일반적인 스트레스 반응 범위입니다."; }
  else if(sc<=39){ level="경도"; guide="경도의 외상 관련 반응이 있습니다."; }
  else if(sc<=59){ level="중등도"; guide="PTSD 관련 증상 가능성이 있습니다. 상담을 권합니다."; }
  else { level="고도"; guide="증상이 고도입니다. 전문적 평가가 권고됩니다."; }

  out.style.display='block';
  out.innerHTML = `<b>총점: ${sc}점 (0~88)</b><br/>구분: <b>${level}</b><br/><span class="muted">${guide}</span>`;
  counsel.style.display='block';
});
</script>
</body>
</html>
