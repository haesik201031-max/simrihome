<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>PHQ-9 (우울)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  h1{font-size:28px;margin:8px 0 16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:inline-flex;align-items:center;gap:8px;margin:6px 10px 6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer;margin-top:10px}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px;font-size:16px}
  .muted{color:#667085}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
  .counsel-btn{display:none;text-align:center;margin-top:20px}
  .counsel-btn button{background:#e53935;color:#fff;font-size:18px;font-weight:700;border:0;border-radius:12px;padding:16px 28px;cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">마음건강 자가검진</div>
    <a class="home" href="index.html">← 메인으로</a>
  </div>
  <h1>PHQ-9 (우울)</h1>
  <p class="muted">지난 2주 동안 얼마나 자주 해당 경험을 했는지 선택하세요.</p>

  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">결과 확인</button>
    <div id="out" class="result" style="display:none"></div>
  </div>

  <div class="counsel-btn" id="counselDiv">
    <button onclick="window.location.href='counsel.html'" type="button">상담 신청하기</button>
  </div>
</div>

<script>
// 문항
const q = [
  "일이나 집안일에 흥미가 없거나 즐겁지 않았다.",
  "기분이 가라앉거나 우울하거나 희망이 없었다.",
  "잠들기 어렵거나 자주 깼거나 너무 많이 잤다.",
  "피곤하다고 느끼거나 기운이 거의 없었다.",
  "식욕이 줄거나 과식했다.",
  "자신을 부정적으로 보거나, 실패자라고 느끼거나 자신이나 가족을 실망시켰다고 느꼈다.",
  "신문이나 TV를 볼 만큼 집중하기가 어려웠다.",
  "남들이 눈치챌 정도로 너무 느리게 움직이거나 말하거나, 반대로 너무 많이 움직여서 가만히 있을 수 없었다.",
  "차라리 죽는 것이 낫겠다고 생각하거나, 자신을 해칠 생각을 했다."
];

const labels = ["전혀 아니다 (0점)", "며칠 동안 (1점)", "7일 이상 (2점)", "거의 매일 (3점)"];

const form = document.getElementById('form');
q.forEach((t,i)=>{
  const box=document.createElement('div'); box.className='card';
  box.innerHTML=`
    <div class="q">${i+1}. ${t}</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label><input type="radio" name="q${i}" value="${idx}" required/> ${lb}</label>
      `).join('')}
    </div>`;
  form.append(box);
});

// 점수 합산
function score(){
  let s=0,c=0;
  q.forEach((_,i)=>{
    const sel=form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return; s+=Number(sel.value); c++;
  });
  if(c!==q.length) return null;
  return s; // 0~27
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc=score();
  const out=document.getElementById('out');
  if(sc===null){ alert("모든 문항을 선택해 주세요."); return; }

  let guide="";
  if(sc<=4){
    guide="정상 범위: 특별한 우울 증상은 보이지 않습니다.<br>정상적인 일상생활 유지가 가능하며, 자기 관리 습관을 지속하는 것이 좋습니다.";
  } else if(sc<=9){
    guide="가벼운 우울: 경미한 증상이 있으나 일상생활은 유지 가능합니다.<br>스트레스 관리와 규칙적인 생활 습관, 자기 돌봄이 필요합니다.";
  } else if(sc<=14){
    guide="중등도 우울: 뚜렷한 우울 증상이 있으며 삶의 만족도가 저하될 수 있습니다.<br>상담을 통한 정서적 지원과 관리가 권장됩니다.";
  } else if(sc<=19){
    guide="중등도~중증 우울: 일상에 큰 영향을 주는 우울 증상이 지속되고 있습니다.<br>전문가 상담 및 치료개입이 필요합니다.";
  } else {
    guide="심한 우울: 심각한 우울 증상으로 기능 저하와 위험이 높습니다.<br>즉각적인 전문 상담과 치료가 필수적입니다.";
  }

  out.style.display='block';
  out.innerHTML=`<b>총점: ${sc}점 (0~27)</b><br/><span>${guide}</span>`;
  document.getElementById('counselDiv').style.display='block';

  // 상담 버튼이 자동으로 보이도록 스크롤
  document.getElementById('counselDiv').scrollIntoView({behavior:"smooth"});
});
</script>
</body>
</html>
