<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>온라인 상담 신청</title>
<style>
body{font-family:"Noto Sans KR",sans-serif;background:#f6f9fc;margin:0}
header{padding:20px 16px;background:#2b6cb0;color:#fff}
.wrap{max-width:800px;margin:24px auto;padding:0 16px}
.card{background:#fff;border:1px solid #e6eef5;border-radius:12px;padding:20px}
.row{display:grid;grid-template-columns:160px 1fr;gap:14px}
input,select,textarea{width:100%;padding:10px;border:1px solid #d9e2ec;border-radius:8px}
.btn{background:#2b6cb0;color:#fff;border:none;border-radius:10px;padding:12px 16px;font-weight:600;cursor:pointer}
small{color:#5f6c76}
</style>
</head>
<body>
<header><h1>온라인 상담 신청</h1></header>
<div class="wrap">
  <div class="card">
    <div class="row">
      <div>이름*</div><div><input id="name" required></div>
      <div>연락처*</div><div><input id="phone" placeholder="010-0000-0000" required></div>
      <div>나이</div><div><input id="age" type="number"></div>
      <div>성별</div><div><select id="sex"><option value="">선택</option><option>남</option><option>여</option></select></div>
      <div>거주지</div><div><input id="addr" placeholder="시/군/구"></div>
      <div>비밀글 비밀번호*</div><div><input id="pw" type="password" required></div>
      <div>사전 질문</div><div>
        <label><input type="checkbox" id="q1"> 현재 자/타해 생각이 있습니까?</label><br>
        <label><input type="checkbox" id="q2"> 현재 우울합니까?</label><br>
        <label><input type="checkbox" id="q3"> 평소 술을 자주 마십니까?</label>
      </div>
      <div>상담 요청 내용*</div><div><textarea id="body" rows="8" required></textarea></div>
      <div>개인정보 동의*</div><div><label><input type="checkbox" id="consent" required> 동의합니다</label><br><small>상담 목적의 수집·보관·처리에 동의</small></div>
    </div>
    <div style="margin-top:14px"><button class="btn" id="send">접수하기</button></div>
    <div id="ok" style="margin-top:12px;color:#2b6cb0;font-weight:600;display:none">접수되었습니다.</div>
  </div>
</div>
<script>
const ENDPOINT = 'https://script.google.com/macros/s/DEPLOY_ID/exec'; // Apps Script 배포 URL로 교체
document.getElementById('send').onclick = async ()=>{
  const req = {
    name: v('name'), phone: v('phone'), age: v('age'), sex: v('sex'), addr: v('addr'),
    pw: v('pw'), q1: b('q1'), q2: b('q2'), q3: b('q3'), body: v('body'),
    consent: document.getElementById('consent').checked?'Y':'N',
    ts: new Date().toISOString()
  };
  if(!req.name || !req.phone || !req.pw || !document.getElementById('consent').checked){
    alert('필수 항목을 확인해 주세요.'); return;
  }
  try{
    await fetch(ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(req)});
    document.getElementById('ok').style.display='block';
  }catch(e){ alert('전송 오류: 나중에 다시 시도해주세요.'); }
};
function v(id){return document.getElementById(id).value.trim();}
function b(id){return document.getElementById(id).checked?'예':'아니오';}
</script>
</body>
</html>
