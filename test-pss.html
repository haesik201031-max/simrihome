<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>PSS(스트레스 지각 척도)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  h1{font-size:28px;margin:8px 0 16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:inline-flex;align-items:center;gap:8px;margin:6px 10px 6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer}
  .btn:disabled{opacity:.5}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px}
  .muted{color:#667085}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">마음건강 자가검진</div>
    <a class="home" href="index.html">← 메인으로</a>
  </div>
  <h1>PSS (스트레스 지각 척도)</h1>
  <p class="muted">지난 1개월 동안의 경험에 대해, 각 문항을 얼마나 자주 느꼈는지 선택하세요.</p>

  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">결과 보기</button>
    <div id="out" class="result" style="display:none"></div>
  </div>
</div>

<script>
// 문항 텍스트(표시용) — '(역채점)' 표시는 제거
const questions = [
  "예상치 못한 일 때문에 화가 난 적이 있었다",
  "생활의 중요한 일들을 통제할 수 없다고 느꼈다",
  "신경이 예민해지고 스트레스를 받고 있다고 느꼈다",
  "개인적 문제들을 다루는 데 자신감이 있었다",
  "일상의 일들이 생각대로 진행된다고 느꼈다",
  "꼭 해야 하는 일을 처리할 수 없다고 느꼈다",
  "일상생활의 짜증을 잘 다스릴 수 있었다",
  "최상의 컨디션이라고 느꼈다",
  "통제할 수 없는 일 때문에 화가 난 적이 있었다",
  "어려운 일들이 너무 많이 쌓여 극복하기 어렵다고 느꼈다"
];

// 보기(표시용) — 괄호 점수 안내 제거
const labels = ["전혀 없음","거의 없음","때때로 있음","자주 있음","매우 자주"];

// 역채점 문항(0기반 인덱스) — 채점 로직은 그대로 유지
const reverseIdx = new Set([3,4,6,7]); // 4,5,7,8번

const form = document.getElementById('form');
questions.forEach((t,i)=>{
  const box = document.createElement('div'); box.className='card';
  box.innerHTML = `
    <div class="q">${i+1}. 지난 1개월 동안, ${t}?</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label>
          <input type="radio" name="q${i}" value="${idx}" required/> ${lb}
        </label>
      `).join('')}
    </div>`;
  form.append(box);
});

// PSS 채점(0~40)
function scorePSS(){
  let total=0, cnt=0;
  questions.forEach((_,i)=>{
    const sel = form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return;
    let v = Number(sel.value); // 0..4
    // 역채점 변환: 0↔4, 1↔3, 2→2
    if(reverseIdx.has(i)) v = 4 - v;
    total += v; cnt++;
  });
  if(cnt!==questions.length) return null;
  return total;
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc = scorePSS();
  const out = document.getElementById('out');
  if(sc===null){ alert('모든 문항을 선택해 주세요.'); return; }
  // 구간: 0–13 낮음, 14–26 중간, 27–40 높음
  let level="", guide="";
  if(sc<=13){ level="낮음"; guide="전반적으로 스트레스 지각이 낮은 편입니다."; }
  else if(sc<=26){ level="중간"; guide="보통 수준의 스트레스를 경험할 수 있습니다."; }
  else { level="높음"; guide="스트레스 지각이 높은 편입니다. 생활 패턴/상담 등 점검을 권합니다."; }

  out.style.display='block';
  out.innerHTML = `<b>총점: ${sc}점 (0~40)</b><br/>구분: <b>${level}</b><br/><span class="muted">${guide}</span>`;
});
</script>
</body>
</html>
