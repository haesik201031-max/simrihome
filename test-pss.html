<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PSS (스트레스 검사)</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f7fa; margin:40px; }
    h1 { color:#222; }
    .question { margin-bottom:20px; }
    .options label { margin-right:15px; }
    button { background:#1976d2; color:#fff; padding:10px 20px; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#0d47a1; }
    #result { margin-top:30px; font-weight:bold; }
  </style>
</head>
<body>
  <h3>마음건강 자가검진</h3>
  <h1>PSS (스트레스)</h1>
  <p>지난 한 달 동안 얼마나 자주 해당 상황을 경험했는지 선택하세요.</p>

  <form id="pssForm">
    <div id="questions"></div>
    <button type="button" onclick="calculateScore()">결과 확인</button>

    <!-- ✅ 구글폼 hidden 값 전달 -->
    <input type="hidden" name="entry.926411538" id="nickname" value="">
    <input type="hidden" name="entry.1280065148" id="gender" value="">
    <input type="hidden" name="entry.1741860606" id="age" value="">
    <input type="hidden" name="entry.2096812076" id="region" value="">
    <input type="hidden" name="entry.1849931493" id="testname" value="PSS">
    <input type="hidden" name="entry.2131156286" id="score" value="">
    <input type="hidden" name="entry.2114023650" id="resultText" value="">
  </form>

  <div id="result"></div>

  <script>
    const questions = [
      "1. 지난 한 달 동안, 예상치 못한 일 때문에 화가 난 적이 얼마나 있었습니까?",
      "2. 지난 한 달 동안, 중요한 일들을 통제할 수 없다고 느낀 적이 얼마나 있었습니까?",
      "3. 지난 한 달 동안, 긴장되거나 스트레스를 받는다고 느낀 적이 얼마나 있었습니까?",
      "4. 지난 한 달 동안, 개인적인 문제를 처리할 수 없다고 느낀 적이 얼마나 있었습니까?",
      "5. 지난 한 달 동안, 인생에서 일어난 중요한 일들을 통제할 수 있다고 느낀 적이 얼마나 있었습니까?",
      "6. 지난 한 달 동안, 해야 할 일을 다 해낼 수 없다고 느낀 적이 얼마나 있었습니까?",
      "7. 지난 한 달 동안, 어려운 상황을 통제할 수 있다고 느낀 적이 얼마나 있었습니까?",
      "8. 지난 한 달 동안, 짜증을 참을 수 없었던 적이 얼마나 있었습니까?",
      "9. 지난 한 달 동안, 모든 것이 내 뜻대로 된다고 느낀 적이 얼마나 있었습니까?",
      "10. 지난 한 달 동안, 어려운 일들을 잘 해결할 수 있었다고 느낀 적이 얼마나 있었습니까?"
    ];

    const container = document.getElementById("questions");
    questions.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `
        <p>${q}</p>
        <div class="options">
          <label><input type="radio" name="q${idx}" value="0"> 전혀 아니다</label>
          <label><input type="radio" name="q${idx}" value="1"> 가끔 그렇다</label>
          <label><input type="radio" name="q${idx}" value="2"> 자주 그렇다</label>
          <label><input type="radio" name="q${idx}" value="3"> 거의 항상 그렇다</label>
        </div>
      `;
      container.appendChild(div);
    });

    function calculateScore() {
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected) {
          score += parseInt(selected.value);
        } else {
          alert(`${i+1}번 문항에 응답해주세요.`);
          return;
        }
      }

      let guide = "";
      if (score <= 13) {
        guide = "낮음 (0–13점): 스트레스에 대한 지각 수준이 낮으며, 전반적으로 안정된 상태입니다. 대처 전략이 비교적 유효하게 작동하고 있으며, 회복력이 좋습니다. 규칙적인 자기 관리 습관을 유지하는 것이 예방 차원에서 중요합니다.";
      } else if (score <= 19) {
        guide = "중간 (14–19점): 일상에서 반복적인 부담과 긴장이 체감되고 있습니다. 스트레스 상황을 인식하지만 대처 자원이 제한적일 수 있습니다. 상담을 통한 스트레스 관리 교육 및 자기 돌봄 기술 향상이 필요합니다.";
      } else {
        guide = "높음 (20점 이상): 스트레스 경험이 일상 전반에 영향을 미치며, 정서적 소진이나 신체 증상으로 이어질 수 있습니다. 불면, 과민 반응, 건강 악화가 동반될 가능성이 높습니다. 전문적인 상담 개입 및 환경 조정이 필수적으로 권장됩니다.";
      }

      document.getElementById("score").value = score;
      document.getElementById("resultText").value = guide;
      document.getElementById("result").innerHTML = `<h3>총점: ${score}</h3><p>${guide}</p>`;

      // ✅ 필요 시 자동 제출 가능 (구글폼 action에 맞게 적용)
      // document.getElementById("pssForm").submit();
    }
  </script>
</body>
</html>
