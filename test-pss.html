<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>PSS (ìŠ¤íŠ¸ë ˆìŠ¤)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:"Noto Sans KR",sans-serif;margin:0;background:#f6f8fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:32px}
  h1{font-size:28px;margin:8px 0 16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:22px 20px;margin:14px 0;box-shadow:0 6px 16px rgba(17,24,39,.06)}
  .q{margin:0 0 12px;font-weight:600}
  .opts label{display:inline-flex;align-items:center;gap:8px;margin:6px 10px 6px 0;padding:8px 10px;border-radius:10px;border:1px solid #e5e7eb;cursor:pointer}
  .btn{display:inline-block;background:#1668e3;color:#fff;border:0;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer;margin-top:10px}
  .result{background:#eef5ff;border:1px solid #cfe2ff;border-radius:12px;padding:16px 18px;margin-top:16px;font-size:16px}
  .muted{color:#667085}
  .topnav{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  a.home{color:#1668e3;text-decoration:none;font-weight:600}
  .counsel-btn{display:none;text-align:center;margin-top:20px}
  .counsel-btn button{background:#e53935;color:#fff;font-size:18px;font-weight:700;border:0;border-radius:12px;padding:16px 28px;cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <div class="topnav">
    <div class="muted">ë§ˆìŒê±´ê°• ìê°€ê²€ì§„</div>
    <a class="home" href="index.html">â† ë©”ì¸ìœ¼ë¡œ</a>
  </div>
  <h1>PSS (ìŠ¤íŠ¸ë ˆìŠ¤)</h1>
  <p class="muted">ì§€ë‚œ í•œ ë‹¬ ë™ì•ˆ ì–¼ë§ˆë‚˜ ìì£¼ í•´ë‹¹ ìƒí™©ì„ ê²½í—˜í–ˆëŠ”ì§€ ì„ íƒí•˜ì„¸ìš”.</p>

  <!-- ë¬¸í•­ ì˜ì—­ -->
  <form id="form"></form>

  <div>
    <button class="btn" id="submitBtn" type="button">ê²°ê³¼ í™•ì¸</button>
    <div id="out" class="result" style="display:none"></div>
  </div>

  <div class="counsel-btn" id="counselDiv">
    <button onclick="window.location.href='counsel.html'" type="button">ìƒë‹´ ì‹ ì²­í•˜ê¸°</button>
  </div>

  <!-- ìˆ¨ê²¨ì§„ í•„ë“œ (êµ¬ê¸€í¼ entry) -->
  <div id="hiddenFields" style="display:none"></div>
</div>

<script>
const q = [
  "ì˜ˆìƒì¹˜ ëª»í•œ ì¼ ë•Œë¬¸ì— í™”ê°€ ë‚œ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ì¤‘ìš”í•œ ì¼ì„ í†µì œí•  ìˆ˜ ì—†ë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ê¸´ì¥ì„ ë§ì´ í–ˆë˜ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ìì‹ ì´ í•´ì•¼ í•  ì¼ì„ í†µì œí•  ìˆ˜ ì—†ë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ë¬¸ì œê°€ ë„ˆë¬´ ë§ì•„ ê°ë‹¹í•  ìˆ˜ ì—†ë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ì–´ë ¤ìš´ ì¼ì„ ì˜ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ê°œì¸ì ì¸ ë¬¸ì œë¥¼ ì˜ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ì¤‘ìš”í•œ ì¼ì„ í†µì œí•  ìˆ˜ ìˆì—ˆë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ì–´ë ¤ìš´ ìƒí™©ì„ ì˜ ëŒ€ì²˜í•  ìˆ˜ ìˆì—ˆë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?",
  "ìƒí™œ ì† ì§œì¦ë‚˜ëŠ” ì¼ì„ ì˜ ì¡°ì ˆí•  ìˆ˜ ìˆì—ˆë‹¤ê³  ëŠë‚€ ì ì´ ì–¼ë§ˆë‚˜ ìˆì—ˆìŠµë‹ˆê¹Œ?"
];

const labels = ["ì „í˜€ ì—†ìŒ","ê°€ë”","ìì£¼","ë§¤ìš° ìì£¼"];
const form = document.getElementById('form');

// ğŸ”¹ ë¬¸í•­ì€ ë¬´ì¡°ê±´ ë¨¼ì € ë³´ì´ë„ë¡ append
q.forEach((t,i)=>{
  const box=document.createElement('div'); box.className='card';
  box.innerHTML=`
    <div class="q">${i+1}. ${t}</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label><input type="radio" name="q${i}" value="${idx}" required/> ${lb}</label>
      `).join('')}
    </div>`;
  form.append(box);
});

function score(){
  let s=0,c=0;
  q.forEach((_,i)=>{
    const sel=form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return; s+=Number(sel.value); c++;
  });
  if(c!==q.length) return null;
  return s;
}

document.getElementById('submitBtn').addEventListener('click', ()=>{
  const sc=score();
  const out=document.getElementById('out');
  if(sc===null){ alert('ëª¨ë“  ë¬¸í•­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return; }

  let guide="";
  if(sc<=13){
    guide="ë‚®ìŒ (0â€“13ì )<br/>ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ì´ ë‚®ìœ¼ë©° ì „ë°˜ì ìœ¼ë¡œ ì•ˆì •ëœ ìƒíƒœì…ë‹ˆë‹¤.<br/>ëŒ€ì²˜ ì „ëµì´ ìœ íš¨í•˜ê³  íšŒë³µë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤.<br/>ê·œì¹™ì ì¸ ìê¸° ê´€ë¦¬ ìŠµê´€ì„ ìœ ì§€í•˜ì„¸ìš”.";
  } else if(sc<=19){
    guide="ì¤‘ê°„ (14â€“19ì )<br/>ë°˜ë³µì ì¸ ë¶€ë‹´ê³¼ ê¸´ì¥ì´ ì²´ê°ë©ë‹ˆë‹¤.<br/>ëŒ€ì²˜ ìì›ì´ ì œí•œì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>ìƒë‹´ì„ í†µí•œ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ êµìœ¡ ë° ìê¸° ëŒë´„ ê¸°ìˆ ì´ í•„ìš”í•©ë‹ˆë‹¤.";
  } else {
    guide="ë†’ìŒ (20ì  ì´ìƒ)<br/>ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¼ìƒ ì „ë°˜ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.<br/>ë¶ˆë©´, ê³¼ë¯¼ ë°˜ì‘, ê±´ê°• ì•…í™”ê°€ ë™ë°˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>ì „ë¬¸ì ì¸ ìƒë‹´ ë° í™˜ê²½ ì¡°ì •ì´ í•„ìˆ˜ì ìœ¼ë¡œ ê¶Œì¥ë©ë‹ˆë‹¤.";
  }

  out.style.display='block';
  out.innerHTML=`<b>ì´ì : ${sc}ì  (0~30)</b><br/><span>${guide}</span>`;
  document.getElementById('counselDiv').style.display='block';

  // ğŸ”¹ localStorage ë¶ˆëŸ¬ì˜¤ê¸°
  const name=localStorage.getItem('name')||'';
  const gender=localStorage.getItem('gender')||'';
  const age=localStorage.getItem('age')||'';
  const location=localStorage.getItem('location')||'';

  sendToGoogleForm({name,gender,age,location,testName:"PSS",score:sc,result:guide});
});

function sendToGoogleForm(data){
  const url="https://docs.google.com/forms/d/e/1FAIpQLSc3C7dxR-Aj_hoiCSTScEMVspsynE9q1wMvBjlrwceDccJrHg/formResponse";
  const fd=new FormData();
  fd.append("entry.926411538", data.name);
  fd.append("entry.1280065148", data.gender);
  fd.append("entry.1741860606", data.age);
  fd.append("entry.2096812076", data.location);
  fd.append("entry.1849931493", data.testName);
  fd.append("entry.2131156286", data.score);
  fd.append("entry.2114023650", data.result);

  fetch(url,{method:"POST",mode:"no-cors",body:fd})
    .then(()=>console.log("êµ¬ê¸€í¼ ì „ì†¡ ì„±ê³µ"))
    .catch(err=>console.error("ì „ì†¡ ì‹¤íŒ¨",err));
}
</script>
</body>
</html>
