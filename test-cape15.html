<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>CAPE-15 (정신증 경험)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:"Noto Sans KR",sans-serif;background:#f6f8fb;margin:0}
  .wrap{max-width:960px;margin:0 auto;padding:32px}
  .card{background:#fff;border:1px solid #ddd;border-radius:14px;padding:16px;margin:12px 0}
  .q{font-weight:600;margin-bottom:8px}
  .opts label{display:inline-flex;align-items:center;margin:4px 8px 4px 0;padding:6px 10px;border:1px solid #ddd;border-radius:8px;cursor:pointer}
  .btn{background:#2563eb;color:#fff;border:0;padding:12px 20px;border-radius:10px;cursor:pointer;font-weight:700;margin-top:10px}
</style>
</head>
<body>
<div class="wrap">
  <h2>CAPE-15 검사</h2>
  <form id="form"></form>
  <button class="btn" id="submitBtn" type="button">결과 보기</button>
</div>

<script>
const qs=["사람들이 나에 대해 숨은 의미로 말하는 느낌","생각이 메아리처럼 들림","어떤 힘이 자신을 통제하는 느낌"];
const labels=["없음","가끔","자주","거의 항상"];
const form=document.getElementById('form');
qs.forEach((t,i)=>{
  const box=document.createElement('div'); box.className='card';
  box.innerHTML=`
    <div class="q">${i+1}. ${t}</div>
    <div class="opts">
      ${labels.map((lb,idx)=>`
        <label><input type="radio" name="q${i}" value="${idx}" required/> ${lb}</label>
      `).join('')}
    </div>`;
  form.append(box);
});
function score(){
  let s=0,c=0;
  qs.forEach((_,i)=>{
    const sel=form.querySelector(`input[name="q${i}"]:checked`);
    if(!sel)return; s+=Number(sel.value); c++;
  });
  if(c!==qs.length)return null;
  return s;
}
document.getElementById('submitBtn').addEventListener('click',()=>{
  const sc=score();
  if(sc===null){alert('모든 문항을 선택하세요.');return;}
  const params=new URLSearchParams(window.location.search);
  params.set("score",sc);
  window.location.href="result.html?"+params.toString();
});
</script>
</body>
</html>
